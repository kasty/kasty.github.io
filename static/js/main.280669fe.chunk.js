(this["webpackJsonpcovid19-auto-generator"]=this["webpackJsonpcovid19-auto-generator"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a=n(8),c=n(10),r=n.n(c),i=n(41),s=n.n(i),o=(n(63),n(64),n(65),function(){return Object(a.jsxs)("h1",{className:"text-center mb-4",children:["G\xe9n\xe9rateur d'autorisation ",Object(a.jsx)("span",{className:"badge badge-warning",children:"COVID-19"})]})}),l=n(23),u=n(18),d=n.n(u),m=n(22),h={reasonsList:{travail:{title:"au boulot",emoji:"\ud83d\udda5"},famille:{title:"m'occuper de la famille",emoji:"\ud83d\udcaa\ud83c\udffc"},achats:{title:"faire les courses",emoji:"\ud83d\uded2"},sport_animaux:{title:"prendre l'air",emoji:" \u2614\ufe0f"},sante:{title:"chez le doc (glups)",emoji:"\ud83e\udd12"},handicap:{title:"me d\xe9placer en situation de handicap",emoji:"\ud83e\uddbd"},convocation:{title:"\xe0 une convocation",emoji:"\ud83d\udcc4"},missions:{title:"participer \xe0 une mission d'int\xe9r\xeat g\xe9n\xe9ral",emoji:"\ud83d\udd27"},enfants:{title:"chercher les enfants \xe0 l'\xe9cole",emoji:"\ud83e\uddf8"}},users:{robert:{profile:{firstname:"Robert",lastname:"Tudor",birthday:"24/06/1978",placeofbirth:"Nantes",address:"35 rue de l'\xe9p\xe9e",zipcode:"44000",city:"Nantes",emoji:"\ud83d\udc3c"},settings:{choices:["famille","achats","sport_animaux","sante","handicap"],defaultChoice:"sport_animaux"}},janine:{profile:{firstname:"Janine",lastname:"Tudor",birthday:"01/05/1975",placeofbirth:"Biarritz",address:"35 rue de l'\xe9p\xe9e",zipcode:"44000",city:"Nantes",emoji:"\ud83d\udc19"},settings:{choices:["travail","famille","achats","sport_animaux","sante","missions"],defaultChoice:"travail"}}},defaultUser:"janine"},f=function(e){var t=e.currentUser,n=void 0===t?"":t,c=e.onChange;return Object(a.jsxs)("h2",{className:"mb-4",children:["Je suis",Object(a.jsxs)("select",{id:"user",name:"user",className:"custom-select custom-select-lg",value:n,onChange:c,children:[Object(a.jsx)("option",{value:"",children:"..."}),Object.keys(h.users).map((function(e,t){var n=e.charAt(0).toUpperCase()+e.slice(1);return Object(a.jsxs)("option",{value:e,children:[n," ",h.users[e].profile.emoji]})}))]})]})},p=function(e){var t=e.currentReason,n=e.onChange,c=e.reasons;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Je vais ..."}),Object(a.jsx)("div",{className:"custom-control custom-radio",children:Object.keys(h.reasonsList).map((function(e){var r,i;return c&&(null===c||void 0===c?void 0:c.includes(e))||null==c?Object(a.jsxs)("p",{id:"reason-".concat(e),className:"choice mt-3 mb-3",children:[Object(a.jsx)("input",{type:"radio",name:"field-reason",id:e,value:e,className:"custom-control-input",checked:t===e,onChange:n}),Object(a.jsxs)("label",{htmlFor:e,className:"custom-control-label",children:[null===(r=h.reasonsList[e])||void 0===r?void 0:r.title," ",null===(i=h.reasonsList[e])||void 0===i?void 0:i.emoji]})]},e):null}))})]})},j=(n(29),["for","inputmode","minlength","maxlength","min","max","pattern"]);function b(e,t){var n=function(e,t){var n=document.createElement(e);return j.forEach((function(e){t&&e in t&&t[e]&&n.setAttribute(e,t[e]),t&&delete t[e]})),Object.assign(n,t),n}("a"),a=URL.createObjectURL(e);n.href=a,n.download=t,document.body.appendChild(n),n.click()}var g=n(42),v=n.n(g);function x(e){return v.a.toDataURL(e,{errorCorrectionLevel:"M",type:"image/png",quality:.92,margin:1})}var O=n(28),y={travail:578,achats:533,sante:477,famille:435,handicap:396,sport_animaux:358,convocation:295,missions:255,enfants:211};function C(e,t,n){return w.apply(this,arguments)}function w(){return(w=Object(m.a)(d.a.mark((function e(t,n,a){var c,r,i,s,o,l,u,m,h,f,p,j,b,g,v,C,w,S,L,D,F,T,U;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new Date,r=c.toLocaleDateString("fr-FR"),i=c.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}).replace(":","h"),s=t.lastname,o=t.firstname,l=t.birthday,u=t.placeofbirth,m=t.address,h=t.zipcode,f=t.city,p=t.datesortie,j=t.heuresortie,b=["Cree le: ".concat(r," a ").concat(i),"Nom: ".concat(s),"Prenom: ".concat(o),"Naissance: ".concat(l," a ").concat(u),"Adresse: ".concat(m," ").concat(h," ").concat(f),"Sortie: ".concat(p," a ").concat(j),"Motifs: ".concat(n)].join(";\n "),e.next=7,fetch(a).then((function(e){return e.arrayBuffer()}));case 7:return g=e.sent,e.next=10,O.PDFDocument.load(g);case 10:return(v=e.sent).setTitle("COVID-19 - D\xe9claration de d\xe9placement"),v.setSubject("Attestation de d\xe9placement d\xe9rogatoire"),v.setKeywords(["covid19","covid-19","attestation","d\xe9claration","d\xe9placement","officielle","gouvernement"]),v.setProducer("DNUM/SDIT"),v.setCreator(""),v.setAuthor("Minist\xe8re de l'int\xe9rieur"),C=v.getPages()[0],e.next=20,v.embedFont(O.StandardFonts.Helvetica);case 20:return w=e.sent,(S=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:11;C.drawText(e,{x:t,y:n,size:a,font:w})})("".concat(o," ").concat(s),119,696),S(l,119,674),S(u,297,674),S("".concat(m," ").concat(h," ").concat(f),133,652),n.split(", ").forEach((function(e){S("x",78,y[e],18)})),(L=N(w,t.city,83,7,11))||(alert('Le nom de la ville risque de ne pas \xeatre affich\xe9 correctement en raison de sa longueur. Essayez d\'utiliser des abr\xe9viations ("Saint" en "St." par exemple) quand cela est possible.'),L=7),S(t.city,105,177,L),S("".concat(t.datesortie),91,153,11),S("".concat(t.heuresortie),264,153,11),e.next=34,x(b);case 34:return D=e.sent,e.next=37,v.embedPng(D);case 37:return F=e.sent,C.drawImage(F,{x:C.getWidth()-156,y:100,width:92,height:92}),v.addPage(),(T=v.getPages()[1]).drawImage(F,{x:50,y:T.getHeight()-350,width:300,height:300}),e.next=44,v.save();case 44:return U=e.sent,e.abrupt("return",new Blob([U],{type:"application/pdf"}));case 46:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,n,a,c){for(var r=c,i=e.widthOfTextAtSize(t,c);i>n&&r>a;)i=e.widthOfTextAtSize(t,--r);return i>n?null:r}var S=n.p+"static/media/certificate.eeff7ddd.pdf",L=function(){var e=function(){var e=Object(m.a)(d.a.mark((function e(){var t,n,a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.profile,n=new Date,t.datesortie="".concat(n.getDate(),"/").concat(n.getMonth()+1,"/").concat(n.getFullYear()),t.heuresortie="".concat(n.getHours(),":").concat(n.getMinutes()),e.next=6,C(t,j,S);case 6:a=e.sent,c=n.toLocaleDateString("fr-CA"),r=n.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}).replace(":","-"),b(a,"attestation-".concat(c,"_").concat(r,".pdf"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=r.a.useState(document.location.search.replace("?p=","")||(h&&h.defaultUser&&h.users&&h.users[h.defaultUser]?h.defaultUser:"")),n=Object(l.a)(t,2),i=n[0],s=n[1],o=r.a.useState(""),u=Object(l.a)(o,2),j=u[0],g=u[1],v=r.a.useState({}),x=Object(l.a)(v,2),O=x[0],y=x[1];return Object(c.useEffect)((function(){if(""!==i){var e=h.users[i];y(h.users[i]),g(e.settings.defaultChoice)}else y({}),g("")}),[i]),Object(a.jsxs)("form",{children:[Object(a.jsx)(f,{currentUser:i,onChange:function(e){s(e.target.value)}}),Object(a.jsx)(p,{currentReason:j,reasons:O&&O.settings&&O.settings.choices?O.settings.choices:null,onChange:function(e){g(e.currentTarget.value)}}),Object(a.jsx)("button",{type:"button",className:"btn btn-info btn-lg btn-block",id:"generate-btn",onClick:e,children:"G\xe9n\xe9rer"})]})};var D=function(){return Object(a.jsx)("div",{id:"app",className:"App container-md",children:Object(a.jsx)("div",{className:"mx-auto card",id:"main",children:Object(a.jsxs)("div",{className:"card-body text-center",children:[Object(a.jsx)(o,{}),Object(a.jsx)(L,{})]})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,101)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(D,{})}),document.getElementById("root")),F()},63:function(e,t,n){},65:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.280669fe.chunk.js.map